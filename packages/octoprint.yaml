################################################################
## packages / octoprint
################################################################

homeassistant:
  customize:
    ################################################
    ## node anchors
    ################################################

    package.node_anchors:
      customize: &customize
        package: 'octoprint'

      automation: &automation
        initial_state: true


################################################
## binary_sensors
################################################

binary_sensor:
  - platform: octoprint
    monitored_conditions:
      - Printing
      - Printing Error

################################################
## sensors
################################################

sensor:
  - platform: octoprint
    name: OctoPrint
    monitored_conditions:
      - Current State
      - Temperatures
      - Job Percentage
        
################################################
## switch
################################################

switch:
  - platform: mqtt
    <<: *customize
    name: "3D Printer Power"
    state_topic: "stat/3d_printer/POWER"
    command_topic: "cmnd/3d_printer/power"
    payload_on: "ON"
    payload_off: "OFF"
    retain: true
    qos: 1

################################################
## group
################################################

#group:
#  APC UPS Daemon:
#    entities:
#      - binary_sensor.ups_online_status
#      - sensor.ups_status
#      - sensor.ups_battery
#      - sensor.ups_input_voltage
#      - sensor.ups_output_voltage
#      - sensor.ups_load
#      - sensor.ups_time_left
#      - sensor.ups_time_on_battery
#      - sensor.ups_transfer_count
